<!DOCTYPE html>
<html>
<head>
    <title>Financial Data Visualization</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

<div id="financialPlot" style="width:100%; height:1200px;"></div>

<script>
fetch('breadthdata.csv')
.then(response => response.text())
.then(csvString => {
    const rows = csvString.trim().split('\n');
    const headers = rows.shift().split(',');
    const parsedData = rows.map(row => {
        const values = row.split(',');
        const entry = {};
        headers.forEach((header, index) => {
            entry[header] = values[index];
        });
        return entry;
    });

    const dates = parsedData.map(row => row['Date']);
    const closePrices = parsedData.map(row => parseFloat(row['close']));
    const indexMSI = parsedData.map(row => parseFloat(row['Index (MSI)']));
    const macd = parsedData.map(row => parseFloat(row['MACD']));

    const layout = {
        title: 'Financial Data Visualization',
        grid: {rows: 3, columns: 1, pattern: 'independent'},
        xaxis: {title: 'Date', tickangle: -45},
        yaxis: {title: 'Close Prices', type: 'log'},
        xaxis2: {title: 'Date', anchor: 'y2', tickangle: -45},
        yaxis2: {title: 'Index (MSI)', autorange: true},
        xaxis3: {title: 'Date', anchor: 'y3', tickangle: -45},
        yaxis3: {title: 'MACD', autorange: true},
    };

    Plotly.newPlot('financialPlot', [
        {
            x: dates,
            y: closePrices,
            type: 'scatter',
            mode: 'lines',
            name: 'Close Prices',
            xaxis: 'x',
            yaxis: 'y'
        },
        {
            x: dates,
            y: indexMSI,
            type: 'bar',
            name: 'Index (MSI)',
            xaxis: 'x2',
            yaxis: 'y2'
        },
        {
            x: dates,
            y: macd,
            type: 'bar',
            name: 'MACD',
            xaxis: 'x3',
            yaxis: 'y3'
        }
    ], layout);
})
.catch(error => console.error('Error loading the CSV file:', error));
</script>

</body>
</html>
